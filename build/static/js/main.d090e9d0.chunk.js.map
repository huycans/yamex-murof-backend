{"version":3,"sources":["img/logo.png","js/Components/Forum/MiniThreadView.js","js/Constants/API.js","js/Components/API_Functions/SubforumFuncs.js","js/Components/API_Functions/ForumFuncs.js","js/Components/API_Functions/SecureConnect.js","js/Components/API_Functions/ReplyFuncs.js","js/Components/API_Functions/ThreadFuncs.js","js/Components/API_Functions/UserFunc.js","js/Components/Pagination/index.js","js/Components/Pagination/Pagination.js","js/Components/Editor/index.js","js/Components/Editor/Editor.js","js/services/time.js","js/Components/SubForum/index.js","js/Components/SubForum/SubForum.js","js/Constants/Cloudinary.js","js/Components/Thread/Thread.js","js/Components/Forum/index.js","js/Components/Forum/Forum.js","js/Components/LoadingIcon/index.js","js/Components/LoadingIcon/LoadingIcon.js","js/Components/MainContent/MainContent.js","js/Components/MainContent/index.js","js/Components/User/index.js","js/Components/User/UserInfo.js","js/context.js","js/Components/Footer/footer.js","js/Components/TopAuthComp/TopAuthComp.js","js/App.js","registerServiceWorker.js","index.js"],"names":["module","exports","__webpack_require__","p","MiniThreadView","props","forumPath","subforumPath","threadData","date","subforum","Date","lastModifiedTime","react_default","a","createElement","className","concat","getDate","getMonth","react_router_dom","to","id","name","replyNumber","SERVER_API","auth","forum","getAllForum","thread","threadNewest","reply","user","userlogin","usersignup","userTokenCheck","logout","URL","process","baseURL","PROTOCOL","getSubForumList","_callee","fid","link","response","responseJSON","regenerator_default","wrap","_context","prev","next","fetch","method","headers","Accept","Access-Control-Allow-Origin","sent","json","abrupt","t0","stop","createSubforum","_callee2","forumId","description","_context2","Content-Type","body","JSON","stringify","createForum","coverUrl","bikeInfo","_args2","arguments","length","undefined","sendDataWithAuth","api","authData","serverResponse","Authorization","sessionToken","status","sendFormWithAuth","sendReply","content","threadId","bearer","author","userId","withCredentials","message","getReplyList","thrid","page","sendThank","_callee3","rid","_context3","getThreadList","sfid","currentPage","createThread","subForumId","threadContent","getNewestThreadList","_callee4","_context4","token","updateUserInfo","loginWithEmail","username","password","ok","Error","err","signupWithEmail","checkSession","_callee5","_context5","success","_callee6","_context6","Pagination","_ref","current","pages","loadOnClick","dist_default","pageCount","pageRangeDisplayed","marginPagesDisplayed","onPageChange","_ref2","selected","initialPage","containerClassName","pageClassName","pageLinkClassName","activeClassName","previousLabel","nextLabel","breakLabel","previousClassName","nextClassName","breakClassName","breakLinkClassName","nextLinkClassName","previousLinkClassName","disabledClassName","disableInitialCallback","EditorConvertToHTML","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","editorState","EditorState","createEmpty","onEditorStateChange","bind","assertThisInitialized","setState","_this2","react_draft_wysiwyg","wrapperClassName","editorClassName","disabled","onClick","submit","draftToHtml","convertToRaw","getCurrentContent","Component","formatTime","time","getFullYear","getHours","getMinutes","SubForum","threadList","newThreadName","createNewThread","handleInputChange","openModal","closeModal","loadThreadsFromPageNum","htmlString","DOMPurify","sanitize","alert","subforumData","window","location","reload","console","log","event","target","value","defineProperty","isModalOpen","newThreadContent","pageNum","self","then","result","threads","error","_this$props2","match","forumData","_this$state","pageNumber","newThreadModal","lib_default","style","top","left","right","bottom","marginRight","transform","overflow","height","isOpen","contentLabel","border","color","type","placeholder","onChange","Components_Editor","marginTop","map","formattedTime","key","path","latestReply","viewNumber","marginLeft","Components_Pagination","Cloudinary","Thread","isLoading","replies","errorMessage","handleType","thank","loadRepliesFromPageNum","newReplyContent","repliesCopy","index","numberOfThank","params","_this3","getThreadData","_this4","_this$props","RepToolBar","NavBar","forumName","subforumName","ThreadHeader","cloudinary_react_lib","cloudName","cloudinaryConfig","publicId","avatarUrl","createdTime","repliesListView","sort","reply1","reply2","d1","d2","getTime","alt","role","dangerouslySetInnerHTML","__html","errorDisplay","backgroundColor","fontSize","textAlign","newReplyModal","flex","flexDirection","Forum","subforumList","newSubforumName","newSubforumDiscription","createNewSubforum","subforumListCopy","slice","Promise","all","asyncToGenerator","mark","assign","objectSpread","_x","apply","subforumListWithThreads","userFromServer","_this$state2","margin","subforums","SubforumList","MiniThreadViews","MiniThreadView_MiniThreadView","listOfSubForumRoutes","react_router","render","Components_SubForum","ForumView","exact","Components_Thread_Thread","LoadingIcon","display","alignItems","justifyContent","react_loading_default","width","fontWeight","MiniSubForumView","threadNumber","latestThread","MiniForumView","MiniSubForumViewList","MainContent_MiniSubForumView","Collapsible_default","trigger","url","open","MainContent","isError","forumList","newForumName","brand","power","stillProducing","createNewForum","newForumdescription","_this5","getForumList","_this6","Components_LoadingIcon","listOfForum","listOfForumRoute","newForumModal","checked","MainContent_MiniForumView","Components_Forum","UserInfo","UserInfoComponent","userInfo","avatarUpload","favoriteBike","isUpdateSuccess","isUpdating","handleChangeValue","updateUser","targetName","files","preventDefault","data","FormData","append","getUserInfo","lastLogin","numberOfPost","email","htmlFor","accept","AppContext","React","createContext","ContextProvider","Provider","children","Footer","Consumer","src","require","TopAuthComp","handleInputEmail","handleInputPassword","login","signup","authSection","blankAppState","Modal","setAppElement","App","userObj","localStorage","setItem","localState","parse","getItem","LoadingModal","context_ContextProvider","TopAuthComp_TopAuthComp","Components_MainContent","User","footer_Footer","isLocalhost","Boolean","hostname","registerValidSW","swUrl","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","catch","ReactDOM","js_App","document","getElementById","origin","addEventListener","get","indexOf","ready","unregister","checkValidServiceWorker","registerServiceWorker"],"mappings":"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","file":"static/js/main.d090e9d0.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.5c145136.png\";","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Link, Route, Switch } from \"react-router-dom\";\r\n\r\nexport const MiniThreadView = props => {\r\n  let { forumPath, subforumPath, threadData, subforum } = props;\r\n  let date = new Date(threadData.lastModifiedTime);\r\n  return (\r\n    <div className=\"minithread\">\r\n      <div className=\"mini-date-and-tname\">\r\n        <div className=\"mini-date\">{`${date.getDate()}/${date.getMonth()}`}</div>\r\n        <div className=\"mini-tname\">\r\n          <Link to={`/${forumPath}/${subforumPath}/thread/${threadData.id}`}>\r\n            {threadData.name}\r\n          </Link>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"rep\">N/A{threadData.replyNumber}</div>\r\n      <div className=\"views\">N/A</div>\r\n    </div>\r\n  );\r\n};\r\n//   <div className=\"MiniThreadView\">\r\n//   <div className=\"Date\">{`${date.getDate()}/${date.getMonth()}`}</div>\r\n//   <div className=\"MiniThreadView_name\">\r\n//     <Link to={`/${forumPath}/${subforumPath}/thread/${threadData.id}`}>\r\n//       {threadData.name}\r\n//     </Link>\r\n//   </div>\r\n//   <div className=\"MiniThreadView_rep\">10{threadData.replyNumber}</div>\r\n//   <div className=\"MiniThreadView_view\">10</div>\r\n// </div>\r\nMiniThreadView.propTypes = {\r\n  forumPath: PropTypes.string,\r\n  subforumPath: PropTypes.string,\r\n  threadData: PropTypes.object\r\n};","//constants for api access\r\n// const PROTOCOL = \"https://\";\r\n// const SERVER_IP = \"35.196.89.114:5003\";\r\n//const SERVER_IP = \"10.80.250.235:5003\";\r\n\r\n// local link\r\nconst PROTOCOL = \"http://\";\r\nconst SERVER_IP = \"localhost:3000\";\r\n\r\n//deployed link\r\n// const PROTOCOL = \"https://\";\r\n// const SERVER_IP = \"yamex.herokuapp.com\";\r\nconst SERVER_API = {\r\n\tauth: \"/auth\",\r\n\tforum: \"/forum\",\r\n\tgetAllForum: \"/forum/all\",\r\n\tsubforum: \"/subforum\",\r\n\tthread: \"/thread\",\r\n\tthreadNewest: \"/thread/latest\",\r\n\treply: \"/reply\",\r\n\tuser: \"/user\",\r\n\tuserlogin: \"/user/login\",\r\n\tusersignup: \"/user/signup\",\r\n\tuserTokenCheck: \"/user/checkJWTToken\",\r\n\tlogout: \"/user/logout\"\r\n};\r\nlet URL = process.env.baseURL || PROTOCOL + SERVER_IP;\r\n\r\nexport { URL, SERVER_API };\r\n","import { URL, SERVER_API } from \"../../Constants/API\";\r\nasync function getSubForumList(fid) {\r\n\ttry {\r\n\t\tlet link = URL + SERVER_API.subforum + \"?fid=\" + fid;\r\n\t\tlet response = await fetch(link, {\r\n\t\t\tmethod: \"GET\",\r\n\t\t\theaders: {\r\n\t\t\t\tAccept: \"application/json\",\r\n\t\t\t\t\"Access-Control-Allow-Origin\": \"*\"\r\n\t\t\t}\r\n\t\t});\r\n\t\tlet responseJSON = await response.json();\r\n\t\treturn responseJSON;\r\n\t} catch (error) {\r\n\t\tthrow error;\r\n\t}\r\n}\r\n\r\nasync function createSubforum(forumId, description, name) {\r\n\ttry {\r\n\t\tlet link = URL + SERVER_API.subforum;\r\n\t\tlet response = await fetch(link, {\r\n\t\t\tmethod: \"PUT\",\r\n\t\t\theaders: {\r\n\t\t\t\tAccept: \"application/json\",\r\n\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\t\"Access-Control-Allow-Origin\": \"*\"\r\n\t\t\t},\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\tdescription: description,\r\n\t\t\t\tforumId: forumId,\r\n\t\t\t\tname: name\r\n\t\t\t})\r\n\t\t});\r\n\t\tlet responseJSON = await response.json();\r\n\t\treturn responseJSON;\r\n\t} catch (error) {\r\n\t\tthrow error;\r\n\t}\r\n}\r\nexport { getSubForumList, createSubforum };\r\n","import { URL, SERVER_API } from \"../../Constants/API\";\r\nasync function getForumList() {\r\n\ttry {\r\n\t\tlet link = URL + SERVER_API.getAllForum;\r\n\t\tlet response = await fetch(link, {\r\n\t\t\tmethod: \"GET\",\r\n\t\t\theaders: {\r\n\t\t\t\tAccept: \"application/json\",\r\n\t\t\t\t\"Access-Control-Allow-Origin\": \"*\"\r\n\t\t\t}\r\n\t\t});\r\n\t\tlet responseJSON = await response.json();\r\n\t\treturn responseJSON;\r\n\t} catch (error) {\r\n\t\tthrow error;\r\n\t}\r\n}\r\n\r\nasync function createForum(name, coverUrl = \"\", bikeInfo = {}) {\r\n\ttry {\r\n\t\tlet link = URL + SERVER_API.forum;\r\n\t\tlet response = await fetch(link, {\r\n\t\t\tmethod: \"PUT\",\r\n\t\t\theaders: {\r\n\t\t\t\tAccept: \"application/json\",\r\n\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\t\"Access-Control-Allow-Origin\": \"*\"\r\n\t\t\t},\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\tbikeInfo: bikeInfo,\r\n\t\t\t\tcoverUrl: coverUrl,\r\n\t\t\t\tname: name\r\n\t\t\t})\r\n\t\t});\r\n\t\tlet responseJSON = await response.json();\r\n\t\treturn responseJSON;\r\n\t} catch (error) {\r\n\t\tthrow error;\r\n\t}\r\n}\r\n\r\nexport { getForumList, createForum };\r\n","import { URL } from \"../../Constants/API\";\r\nimport sha512 from \"crypto-js/sha512\";\r\n\r\nasync function sendDataWithAuth(method, api, authData, body) {\r\n\ttry {\r\n\t\tlet link = `${URL}${api}`;\r\n\t\tlet serverResponse = await fetch(link, {\r\n\t\t\tmethod: method,\r\n\t\t\theaders: {\r\n\t\t\t\tAccept: \"application/json\",\r\n\t\t\t\t\"Access-Control-Allow-Origin\": \"*\",\r\n\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\t// sessionToken: authData.sessionToken,\r\n\t\t\t\t// enc: hashDigest,\r\n\t\t\t\t\"Authorization\": \"Bearer \" + authData.sessionToken\r\n\t\t\t},\r\n\t\t\tbody: JSON.stringify(body)\r\n\t\t});\r\n\t\t//make sure there is content inside the response before return it\r\n\t\tif (serverResponse.status === 200) {\r\n\t\t\tlet responseJSON = await serverResponse.json();\r\n\t\t\treturn responseJSON;\r\n\t\t} else {\r\n\t\t\tthrow serverResponse;\r\n\t\t}\r\n\r\n\t} catch (error) {\r\n\t\tthrow error;\r\n\t}\r\n}\r\n\r\nasync function sendFormWithAuth(method, api, authData, body) {\r\n\ttry {\r\n\t\tlet link = `${URL}${api}`;\r\n\t\tlet serverResponse = await fetch(link, {\r\n\t\t\tmethod: method,\r\n\t\t\theaders: {\r\n\t\t\t\tAccept: \"application/json\",\r\n\t\t\t\t\"Access-Control-Allow-Origin\": \"*\",\r\n\t\t\t\t// \"Content-Type\": \"multipart/form-data\",//setting this prevent the FormData object from being read by multer at backend\r\n\t\t\t\t\"Authorization\": \"Bearer \" + authData.sessionToken\r\n\t\t\t},\r\n\t\t\tbody: body\r\n\t\t});\r\n\t\t//make sure there is content inside the response before return it\r\n\t\tif (serverResponse.status === 200) {\r\n\t\t\tlet responseJSON = await serverResponse.json();\r\n\t\t\treturn responseJSON;\r\n\t\t} else {\r\n\t\t\tthrow serverResponse;\r\n\t\t}\r\n\r\n\t} catch (error) {\r\n\t\tthrow error;\r\n\t}\r\n}\r\n\r\nasync function sendThankWithAuth(method, api, authData, rid) {\r\n\ttry {\r\n\t\tlet link = `${URL}${api}/${rid}`;\r\n\t\tlet serverResponse = await fetch(link, {\r\n\t\t\tmethod: method,\r\n\t\t\theaders: {\r\n\t\t\t\tAccept: \"application/json\",\r\n\t\t\t\t\"Access-Control-Allow-Origin\": \"*\",\r\n\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\t\"Authorization\": \"Bearer \" + authData.sessionToken\r\n\t\t\t}\r\n\t\t});\r\n\t\tif (serverResponse.status === 200) {\r\n\t\t\tlet responseJSON = await serverResponse.json();\r\n\t\t\treturn responseJSON;\r\n\t\t} else {\r\n\t\t\tthrow serverResponse;\r\n\t\t}\r\n\t} catch (error) {\r\n\t\tthrow error;\r\n\t}\r\n}\r\nexport { sendDataWithAuth, sendThankWithAuth, sendFormWithAuth };\r\n","import { URL, SERVER_API } from \"../../Constants/API\";\r\nimport { sendDataWithAuth, sendThankWithAuth } from \"./SecureConnect\";\r\nasync function sendReply(authData, content, threadId) {\r\n\ttry {\r\n\t\tconst body = {\r\n\t\t\tauthor: {\r\n\t\t\t\tid: authData.userId\r\n\t\t\t},\r\n\t\t\tthreadId: threadId,\r\n\t\t\tcontent: content,\r\n\t\t\t// token: authData.sessionToken\r\n\t\t};\r\n\t\tconst link = URL + SERVER_API.reply;\r\n\t\tconst bearer = 'Bearer ' + authData.sessionToken;\r\n\t\tlet serverResponse = await fetch(link, {\r\n\t\t\tmethod: \"POST\",\r\n\t\t\twithCredentials: true,\r\n\t\t\theaders: {\r\n\t\t\t\tAccept: \"application/json\",\r\n\t\t\t\t\"Access-Control-Allow-Origin\": \"*\",\r\n\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\t\"Authorization\": bearer\r\n\t\t\t},\r\n\t\t\tbody: JSON.stringify(body)\r\n\t\t});\r\n\t\tlet responseJSON = await serverResponse.json();\r\n\t\tif (serverResponse.status === 200) {\r\n\t\t\t//make sure there is content inside the response before return it\r\n\t\t\treturn responseJSON;\r\n\t\t} else {\r\n\t\t\tthrow responseJSON.message;\r\n\t\t}\r\n\t\t// await sendDataWithAuth(\"PUT\", SERVER_API.reply, authData, body);\r\n\t} catch (error) {\r\n\t\tthrow error;\r\n\t}\r\n}\r\n\r\nasync function getReplyList(thrid, page) {\r\n\ttry {\r\n\t\tlet link = URL + SERVER_API.reply + \"?thrid=\" + thrid + \"&page=\" + page;\r\n\t\tlet response = await fetch(link, {\r\n\t\t\tmethod: \"GET\",\r\n\t\t\theaders: {\r\n\t\t\t\tAccept: \"application/json\",\r\n\t\t\t\t\"Access-Control-Allow-Origin\": \"*\"\r\n\t\t\t}\r\n\t\t});\r\n\t\tlet responseJSON = await response.json();\r\n\t\treturn responseJSON;\r\n\t} catch (error) {\r\n\t\tthrow error;\r\n\t}\r\n}\r\n\r\nasync function sendThank(authData, rid) {\r\n\ttry {\r\n\t\t// let response = await sendThankWithAuth(\"POST\", SERVER_API.reply, authData, rid);\r\n\t\tlet response = await sendDataWithAuth(\"PUT\", SERVER_API.reply + \"/\" + rid, authData, {});\r\n\t\treturn response;\r\n\t} catch (error) {\r\n\t\tthrow error;\r\n\t}\r\n}\r\nexport { sendReply, getReplyList, sendThank };\r\n","import { URL, SERVER_API } from \"../../Constants/API\";\r\nimport { sendReply } from \"./ReplyFuncs\";\r\nimport { sendDataWithAuth } from \"./SecureConnect\";\r\n\r\nasync function getThreadList(sfid, currentPage) {\r\n\ttry {\r\n\t\tlet link = URL + SERVER_API.thread + \"?sfid=\" + sfid + \"&page=\" + currentPage;\r\n\t\tlet response = await fetch(link, {\r\n\t\t\tmethod: \"GET\",\r\n\t\t\theaders: {\r\n\t\t\t\tAccept: \"application/json\",\r\n\t\t\t\t\"Access-Control-Allow-Origin\": \"*\"\r\n\t\t\t}\r\n\t\t});\r\n\t\tlet responseJSON = await response.json();\r\n\t\treturn responseJSON;\r\n\t} catch (error) {\r\n\t\tthrow error;\r\n\t}\r\n}\r\n\r\nasync function getThreadData(threadId) {\r\n\ttry {\r\n\t\tlet link = URL + SERVER_API.thread + \"/\" + threadId;\r\n\t\tlet response = await fetch(link, {\r\n\t\t\tmethod: \"GET\",\r\n\t\t\theaders: {\r\n\t\t\t\tAccept: \"application/json\",\r\n\t\t\t\t\"Access-Control-Allow-Origin\": \"*\"\r\n\t\t\t}\r\n\t\t});\r\n\t\tlet responseJSON = await response.json();\r\n\t\treturn responseJSON;\r\n\t} catch (error) {\r\n\t\tthrow error;\r\n\t}\r\n}\r\n\r\nasync function createThread(name, subForumId, content, authData) {\r\n\ttry {\r\n\t\tconst body = {\r\n\t\t\tauthor: {\r\n\t\t\t\tid: authData.userId\r\n\t\t\t},\r\n\t\t\tname: name,\r\n\t\t\tthreadContent: content,\r\n\t\t\tsubForumId: subForumId\r\n\t\t};\r\n\r\n\t\tlet response = await sendDataWithAuth(\r\n\t\t\t\"PUT\",\r\n\t\t\tSERVER_API.thread,\r\n\t\t\tauthData,\r\n\t\t\tbody\r\n\t\t);\r\n\t\t// let threadId = response.id ;\r\n\t\t//a new thread has the thread's content as the first reply, therefore a new thread is created\r\n\t\t// await sendReply(authData, content, threadId);\r\n\t\treturn response;\r\n\t} catch (error) {\r\n\t\tthrow error;\r\n\t}\r\n}\r\n\r\nasync function getNewestThreadList(sfid) {\r\n\ttry {\r\n\t\tlet link = URL + SERVER_API.threadNewest + \"?sfid=\" + sfid;\r\n\t\tlet response = await fetch(link, {\r\n\t\t\tmethod: \"GET\",\r\n\t\t\theaders: {\r\n\t\t\t\tAccept: \"application/json\",\r\n\t\t\t\t\"Access-Control-Allow-Origin\": \"*\"\r\n\t\t\t}\r\n\t\t});\r\n\t\tlet responseJSON = await response.json();\r\n\t\treturn responseJSON;\r\n\t} catch (error) {\r\n\t\tthrow error;\r\n\t}\r\n}\r\nexport { getThreadList, createThread, getThreadData, getNewestThreadList };\r\n","import { URL, SERVER_API } from \"../../Constants/API\";\r\nimport { sendFormWithAuth } from \"./SecureConnect\";\r\nasync function getUserInfo(userId, token) {\r\n\ttry {\r\n\t\tlet link = URL + SERVER_API.user + \"/\" + userId;\r\n\t\tlet bearer = \"Bearer \" + token;\r\n\t\tlet response = await fetch(link, {\r\n\t\t\tmethod: \"GET\",\r\n\t\t\twithCredentials: true,\r\n\t\t\theaders: {\r\n\t\t\t\tAccept: \"application/json\",\r\n\t\t\t\t\"Access-Control-Allow-Origin\": \"*\",\r\n\t\t\t\t\"Authorization\": bearer\r\n\t\t\t}\r\n\t\t});\r\n\t\tlet responseJSON = await response.json();\r\n\t\treturn responseJSON;\r\n\t} catch (error) {\r\n\t\tthrow error;\r\n\t}\r\n}\r\n\r\nasync function updateUserInfo(authData, body) {\r\n\ttry {\r\n\r\n\t\tlet response = await sendFormWithAuth(\r\n\t\t\t\"PUT\",\r\n\t\t\tSERVER_API.user + \"/\" + authData.userId,\r\n\t\t\tauthData,\r\n\t\t\tbody\r\n\t\t);\r\n\t\t//response is already json\r\n\t\treturn response;\r\n\t} catch (error) {\r\n\t\tthrow error;\r\n\t}\r\n}\r\n\r\nasync function loginWithEmail(username, password) {\r\n\ttry {\r\n\t\tlet response = await fetch(URL + SERVER_API.userlogin, {\r\n\t\t\tmethod: \"POST\",\r\n\t\t\theaders: {\r\n\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\tAccept: \"application/json\",\r\n\t\t\t\t\"Access-Control-Allow-Origin\": \"*\"\r\n\t\t\t},\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\tusername: username,\r\n\t\t\t\tpassword: password\r\n\t\t\t})\r\n\t\t});\r\n\t\tlet responseJSON = await response.json();\r\n\t\tif (response.status != 200 && response.ok == false) {\r\n\t\t\tthrow new Error(responseJSON.err.message);\r\n\t\t} else {\r\n\t\t\treturn responseJSON;\r\n\t\t}\r\n\t} catch (error) {\r\n\t\tthrow error;\r\n\t}\r\n}\r\n\r\nasync function signupWithEmail(username, password) {\r\n\ttry {\r\n\t\tlet response = await fetch(URL + SERVER_API.usersignup, {\r\n\t\t\tmethod: \"POST\",\r\n\t\t\theaders: {\r\n\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\tAccept: \"application/json\",\r\n\t\t\t\t\"Access-Control-Allow-Origin\": \"*\"\r\n\t\t\t},\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\tusername: username,\r\n\t\t\t\tpassword: password\r\n\t\t\t})\r\n\t\t});\r\n\t\tlet responseJSON = await response.json();\r\n\t\tif (response.status != 200 && response.ok == false) {\r\n\t\t\tthrow new Error(responseJSON.err.message);\r\n\t\t} else {\r\n\t\t\treturn responseJSON;\r\n\t\t}\r\n\t} catch (error) {\r\n\t\tthrow error;\r\n\t}\r\n}\r\n\r\nasync function checkSession(sessionToken) {\r\n\ttry {\r\n\t\tlet response = await fetch(URL + SERVER_API.userTokenCheck, {\r\n\t\t\tmethod: \"GET\",\r\n\t\t\theaders: {\r\n\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\tAccept: \"application/json\",\r\n\t\t\t\t\"Access-Control-Allow-Origin\": \"*\",\r\n\t\t\t\tAuthorization: \"Bearer \" + sessionToken\r\n\t\t\t}\r\n\t\t});\r\n\t\tlet responseJSON = await response.json();\r\n\t\tif (responseJSON.success == false && responseJSON.status == \"JWT invalid\") {\r\n\t\t\treturn false;\r\n\t\t} else {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t} catch (error) {\r\n\t\tthrow error;\r\n\t}\r\n}\r\n\r\nasync function logout() {\r\n\ttry {\r\n\t\tlet response = await fetch(URL + SERVER_API.logout, {\r\n\t\t\tmethod: \"POST\",\r\n\t\t\theaders: {\r\n\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\tAccept: \"application/json\",\r\n\t\t\t\t\"Access-Control-Allow-Origin\": \"*\"\r\n\t\t\t}\r\n\t\t});\r\n\t\tlet responseJSON = await response.json();\r\n\t} catch (error) {\r\n\t\tthrow error;\r\n\t}\r\n}\r\nexport { getUserInfo, updateUserInfo, loginWithEmail, signupWithEmail, checkSession, logout };\r\n","import Pagination from \"./Pagination\";\r\n\r\nexport default Pagination","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport ReactPaginate from 'react-paginate';\r\n\r\nconst Pagination = ({ current, pages, loadOnClick }) => {\r\n\r\n  return (\r\n    <ReactPaginate pageCount={pages} pageRangeDisplayed={3} marginPagesDisplayed={2}\r\n      onPageChange={({ selected }) => loadOnClick(selected + 1)}\r\n      initialPage={0}\r\n      containerClassName=\"pagination\"\r\n      pageClassName=\"page-item\"\r\n      pageLinkClassName=\"page-link\"\r\n      activeClassName=\"active zeroIndex\"\r\n      previousLabel=\"<\"\r\n      nextLabel=\">\"\r\n      breakLabel=\"...\"\r\n      previousClassName=\"page-item\"\r\n      nextClassName=\"page-item\"\r\n      breakClassName=\"page-item\"\r\n      breakLinkClassName=\"page-link\"\r\n      nextLinkClassName=\"page-link\"\r\n      previousLinkClassName=\"page-link\"\r\n      disabledClassName=\"diabled\"\r\n      disableInitialCallback={true}\r\n    />\r\n  );\r\n};\r\n\r\nPagination.propTypes = {\r\n  current: PropTypes.number,\r\n  pages: PropTypes.number,\r\n  loadOnClick: PropTypes.func\r\n};\r\n\r\nexport default Pagination;","import EditorConvertToHTML from \"./Editor\";\r\n\r\nexport default EditorConvertToHTML;\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { EditorState, convertToRaw } from \"draft-js\";\r\nimport { Editor } from \"react-draft-wysiwyg\";\r\nimport draftToHtml from \"draftjs-to-html\";\r\nimport \"react-draft-wysiwyg/dist/react-draft-wysiwyg.css\";\r\n\r\nclass EditorConvertToHTML extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\teditorState: EditorState.createEmpty()\r\n\t\t};\r\n\t\tthis.onEditorStateChange = this.onEditorStateChange.bind(this);\r\n\t}\r\n\r\n\tonEditorStateChange(editorState) {\r\n\t\tthis.setState({\r\n\t\t\teditorState: editorState\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { editorState } = this.state;\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<Editor\r\n\t\t\t\t\teditorState={editorState}\r\n\t\t\t\t\twrapperClassName=\"demo-wrapper\"\r\n\t\t\t\t\teditorClassName=\"demo-editor\"\r\n\t\t\t\t\tonEditorStateChange={this.onEditorStateChange}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<button\r\n\t\t\t\t\tdisabled={this.props.disabled}\r\n\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\tthis.props.submit(\r\n\t\t\t\t\t\t\tdraftToHtml(convertToRaw(editorState.getCurrentContent()))\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t>\r\n\t\t\t\t\tSubmit\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\nEditorConvertToHTML.propTypes = {\r\n\tsubmit: PropTypes.func.isRequired\r\n};\r\nexport default EditorConvertToHTML;\r\n","const formatTime = time => {\r\n\treturn `${time.getDate()}/${time.getMonth() +\r\n\t\t1}/${time.getFullYear()} at ${time.getHours()}:${time.getMinutes()}`;\r\n};\r\n\r\nexport { formatTime };","import SubForum from \"./SubForum\";\r\n\r\nexport default SubForum;\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Modal from \"react-modal\";\r\nimport DOMPurify from 'dompurify';\r\n\r\nimport { getThreadList } from \"../API_Functions/index\";\r\nimport Pagination from \"../Pagination\";\r\nimport { createThread } from \"../API_Functions\";\r\nimport EditorConvertToHTML from \"../Editor\";\r\nimport { formatTime } from '../../services/time';\r\nimport \"./subforum.css\";\r\n\r\nclass SubForum extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tthreadList: [],\r\n\t\t\tnewThreadName: \"\",\r\n\t\t\tcurrent: null,\r\n\t\t\tpages: null\r\n\t\t};\r\n\t\tthis.createNewThread = this.createNewThread.bind(this);\r\n\t\tthis.handleInputChange = this.handleInputChange.bind(this);\r\n\t\tthis.openModal = this.openModal.bind(this);\r\n\t\tthis.closeModal = this.closeModal.bind(this);\r\n\t\tthis.loadThreadsFromPageNum = this.loadThreadsFromPageNum.bind(this);\r\n\t\tthis.submit = this.submit.bind(this);\r\n\t}\r\n\r\n\tsubmit(htmlString) {\r\n\t\tif (htmlString == \"<p></p>\\n\" || this.newThreadName == \"\") {\r\n\t\t\talert(\"Thread name or thread content cannot be empty\");\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.createNewThread(DOMPurify.sanitize(htmlString));\r\n\t}\r\n\r\n\tasync createNewThread(threadContent) {\r\n\t\ttry {\r\n\t\t\tconst { newThreadName } = this.state;\r\n\t\t\tconst { subforumData, authData } = this.props;\r\n\t\t\tlet response = await createThread(\r\n\t\t\t\tnewThreadName,\r\n\t\t\t\tsubforumData.id,\r\n\t\t\t\tthreadContent,\r\n\t\t\t\tauthData\r\n\t\t\t);\r\n\t\t\tif (response == null) throw Error(\"Error while creating thread\");\r\n\r\n\t\t\t//refresh the page to display the new thread\r\n\t\t\twindow.location.reload();\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(\"Error while creating thread: \", error);\r\n\t\t} finally {\r\n\t\t\tthis.closeModal();\r\n\t\t}\r\n\t}\r\n\r\n\thandleInputChange(event) {\r\n\t\tconst name = event.target.name;\r\n\t\tconst value = event.target.value;\r\n\t\tthis.setState({\r\n\t\t\t[name]: value\r\n\t\t});\r\n\t}\r\n\r\n\topenModal() {\r\n\t\tthis.setState({ isModalOpen: true });\r\n\t}\r\n\r\n\tcloseModal() {\r\n\t\tthis.setState({\r\n\t\t\tisModalOpen: false,\r\n\t\t\tnewThreadName: \"\",\r\n\t\t\tnewThreadContent: \"\"\r\n\t\t});\r\n\t}\r\n\r\n\tasync loadThreadsFromPageNum(pageNum) {\r\n\t\t//pageNum is a number used to load threadList from server\r\n\t\t//thread data are not passed to subforum, must be downloaded again\r\n\t\tconst { subforumData } = this.props;\r\n\t\tconst self = this;\r\n\r\n\t\tgetThreadList(subforumData.id, pageNum).then(\r\n\t\t\tresult => {\r\n\t\t\t\t//if there is no threads, return nothing\r\n\t\t\t\tif (!result) return;\r\n\t\t\t\tself.setState({ threadList: result.threads, current: result.current, pages: result.pages });\r\n\t\t\t},\r\n\t\t\terror => console.log(error)\r\n\t\t);\r\n\t}\r\n\r\n\tcomponentWillMount() {\r\n\t\t//load the first page\r\n\t\tthis.loadThreadsFromPageNum(1);\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { match, forumData, authData, subforumData } = this.props;\r\n\t\t//the maximum page number of a subforum\r\n\t\tconst maxPageNumber = subforumData.pageNumber;\r\n\t\tconst { threadList, newThreadName, isModalOpen, current, pages } = this.state;\r\n\t\tif (!threadList) return <p>Loading</p>;\r\n\t\tconst customStyles = {\r\n\t\t\tcontent: {\r\n\t\t\t\ttop: \"50%\",\r\n\t\t\t\tleft: \"50%\",\r\n\t\t\t\tright: \"auto\",\r\n\t\t\t\tbottom: \"auto\",\r\n\t\t\t\tmarginRight: \"-50%\",\r\n\t\t\t\ttransform: \"translate(-50%, -50%)\",\r\n\t\t\t\toverflow: \"scroll\",\r\n\t\t\t\theight: \"500px\"\r\n\t\t\t}\r\n\t\t};\r\n\t\tconst newThreadModal = (\r\n\t\t\t<Modal\r\n\t\t\t\tstyle={customStyles}\r\n\t\t\t\tisOpen={isModalOpen}\r\n\t\t\t\tcontentLabel=\"newThreadModal\"\r\n\t\t\t>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<h2>Enter information</h2>\r\n\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tstyle={{ border: \"1px black solid\", color: \"black\" }}\r\n\t\t\t\t\t\tname=\"newThreadName\"\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tplaceholder=\"Thread Name\"\r\n\t\t\t\t\t\tvalue={newThreadName}\r\n\t\t\t\t\t\tonChange={this.handleInputChange}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<EditorConvertToHTML submit={this.submit} />\r\n\t\t\t\t\t<button onClick={this.closeModal} style={{ marginTop: \"1em\" }}>Close</button>\r\n\t\t\t\t</div>\r\n\t\t\t</Modal>\r\n\t\t);\r\n\t\tconst threads = threadList.map(thread => {\r\n\t\t\tconst lastModifiedTime = new Date(thread.lastModifiedTime);\r\n\t\t\tconst formattedTime = formatTime(lastModifiedTime);\r\n\t\t\treturn (\r\n\t\t\t\t<div className=\"thread_container\" key={thread.id}>\r\n\t\t\t\t\t<div className=\"thread_info\">\r\n\t\t\t\t\t\t<div className=\"thread_name\">\r\n\t\t\t\t\t\t\t<Link to={`${match.path}/thread/${thread.id}`}>\r\n\t\t\t\t\t\t\t\t{thread.name}\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"thread_creator\">\r\n\t\t\t\t\t\t\tThread by :{\" \"}\r\n\t\t\t\t\t\t\t<Link to={`/user/${thread.author.id}`}>\r\n\t\t\t\t\t\t\t\t{thread.author.username}\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"latest_post\">\r\n\t\t\t\t\t\t<div className=\"lasted_post_time\">\r\n\t\t\t\t\t\t\t<span>{formattedTime}</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"lasted_post_owner\">\r\n\t\t\t\t\t\t\t<span>by </span>\r\n\t\t\t\t\t\t\t<Link to={`/user/${thread.latestReply.author.id}`}>\r\n\t\t\t\t\t\t\t\t{thread.latestReply.author.username}{\" \"}\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"no_rep_view\">\r\n\t\t\t\t\t\t<span>Replies: N/A{thread.replyNumber}</span>\r\n\t\t\t\t\t\t<span>Views: N/A{thread.viewNumber}</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t});\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t{newThreadModal}\r\n\t\t\t\t<div className=\"navigator\">\r\n\t\t\t\t\t<Link to={\"/\"}>YAMEX</Link>\r\n\t\t\t\t\t<span>-&gt;</span>\r\n\t\t\t\t\t<Link to={`/${forumData.path}`}>{forumData.name}</Link>\r\n\t\t\t\t\t<span>-&gt;</span>\r\n\t\t\t\t\t<Link to={`/${forumData.path}/${subforumData.path}`}>\r\n\t\t\t\t\t\t{subforumData.name}\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className=\"intro\">\r\n\t\t\t\t\t<h1>{subforumData.description}</h1>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className=\"paginate_bar\" style={{ marginLeft: \"50px\" }}>\r\n\t\t\t\t\t{authData.sessionToken ? (\r\n\t\t\t\t\t\t<div className=\"postnew\">\r\n\t\t\t\t\t\t\t<button onClick={this.openModal}>New Thread</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t) : null}\r\n\r\n\t\t\t\t\t{pages\r\n\t\t\t\t\t\t? <div>\r\n\t\t\t\t\t\t\t<Pagination current={current} loadOnClick={this.loadThreadsFromPageNum} pages={pages} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t: null\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className=\"subforum_bar\">\r\n\t\t\t\t\t<div className=\"subforum_name\">{subforumData.name}</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t{threads}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nSubForum.propTypes = {\r\n\tmatch: PropTypes.shape({\r\n\t\turl: PropTypes.string,\r\n\t\tpath: PropTypes.string,\r\n\t\tisExact: PropTypes.bool,\r\n\t\tparams: PropTypes.object\r\n\t}),\r\n\thistory: PropTypes.object,\r\n\tsubforumData: PropTypes.shape({\r\n\t\tid: PropTypes.string,\r\n\t\tcreatedTime: PropTypes.string,\r\n\t\tlastModifiedTime: PropTypes.string,\r\n\t\tname: PropTypes.string,\r\n\t\tdescription: PropTypes.string,\r\n\t\tforumId: PropTypes.string,\r\n\t\tlatestThread: PropTypes.object,\r\n\t\tthreadNumber: PropTypes.number,\r\n\t\treplyNumber: PropTypes.number\r\n\t}),\r\n\tforumData: PropTypes.shape({\r\n\t\tbikeInfo: PropTypes.string,\r\n\t\tcoverUrl: PropTypes.string,\r\n\t\tcreatedTime: PropTypes.string,\r\n\t\tdescription: PropTypes.string,\r\n\t\tid: PropTypes.string,\r\n\t\tlastModifiedTime: PropTypes.string,\r\n\t\tmoderators: PropTypes.arrayOf(PropTypes.string),\r\n\t\tname: PropTypes.string,\r\n\t\tpath: PropTypes.string\r\n\t}),\r\n\tauthData: PropTypes.object\r\n};\r\nexport default SubForum;\r\n","export default {\r\n  cloud_name: \"cloudtree\",\r\n  pathToUserAvatar: \"user_avatar/\"\r\n}","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Modal from \"react-modal\";\r\nimport DOMPurify from 'dompurify';\r\nimport { Image, CloudinaryContext } from 'cloudinary-react';\r\n\r\nimport { getReplyList, getThreadData, sendReply, sendThank } from \"../API_Functions\";\r\nimport EditorConvertToHTML from \"../Editor\";\r\nimport Pagination from '../Pagination';\r\nimport { formatTime } from '../../services/time';\r\nimport cloudinaryConfig from '../../Constants/Cloudinary';\r\nimport \"./thread.css\";\r\n\r\nclass Thread extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      isLoading: true,\r\n      thread: null,\r\n      replies: [],\r\n      errorMessage: \"\",\r\n      isModalOpen: false,\r\n      current: null,\r\n      pages: null\r\n    };\r\n    this.openModal = this.openModal.bind(this);\r\n    this.closeModal = this.closeModal.bind(this);\r\n    this.handleType = this.handleType.bind(this);\r\n    this.thank = this.thank.bind(this);\r\n    this.reply = this.reply.bind(this);\r\n    this.loadRepliesFromPageNum = this.loadRepliesFromPageNum.bind(this);\r\n    this.submit = this.submit.bind(this);\r\n  }\r\n\r\n  submit(htmlString) {\r\n    if (htmlString == \"<p></p>\\n\") {\r\n      alert(\"Reply cannot be empty\");\r\n      return;\r\n    }\r\n    this.reply(DOMPurify.sanitize(htmlString));\r\n  }\r\n\r\n  handleType(event) {\r\n    this.setState({ newReplyContent: event.target.value });\r\n  }\r\n\r\n  openModal() {\r\n    const { authData } = this.props;\r\n    if (!authData.sessionToken) {\r\n      alert(\"You're not logging in\");\r\n      return;\r\n    }\r\n    this.setState({ isModalOpen: true });\r\n  }\r\n\r\n  closeModal() {\r\n    this.setState({\r\n      isModalOpen: false,\r\n      newReplyContent: \"\"\r\n    });\r\n  }\r\n\r\n  async reply(newReplyContent) {\r\n    try {\r\n      const { authData } = this.props;\r\n      const { thread } = this.state;\r\n      await sendReply(authData, newReplyContent, thread.id);\r\n      this.setState({ isModalOpen: false });\r\n      window.location.reload();\r\n    } catch (error) {\r\n      this.setState({ errorMessage: error });\r\n    }\r\n  }\r\n\r\n  async thank(rid) {\r\n    try {\r\n      const { authData } = this.props;\r\n      const { replies } = this.state;\r\n      if (!authData.sessionToken) {\r\n        alert(\"You're not logging in\");\r\n        return;\r\n      }\r\n      await sendThank(authData, rid);\r\n\r\n      let repliesCopy = replies.map((reply, index) => {\r\n        if (reply.id == rid) {\r\n          reply.numberOfThank = reply.numberOfThank + 1;\r\n        }\r\n        return reply;\r\n      });\r\n      this.setState({ repliesCopy });\r\n\r\n    } catch (error) {\r\n      this.setState({ errorMessage: error });\r\n    }\r\n  }\r\n\r\n  async loadRepliesFromPageNum(pageNum) {\r\n    try {\r\n      //loading thread is just loading replies in that thread\r\n      this.setState({ isLoading: true });\r\n      const { match } = this.props;\r\n      getReplyList(match.params.threadId, pageNum).then(({ replies, current, pages }) => {\r\n        this.setState({ replies, current, pages });\r\n      });\r\n    } catch (error) {\r\n      this.setState({ errorMessage: error });\r\n    } finally {\r\n      this.setState({ isLoading: false });\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { match } = this.props;\r\n    getThreadData(match.params.threadId).then(thread => {\r\n      this.setState({ thread: thread });\r\n    });\r\n    this.loadRepliesFromPageNum(1);\r\n  }\r\n\r\n  render() {\r\n    const { match, authData } = this.props;\r\n    const { replies, errorMessage, isLoading, thread, isModalOpen, current, pages } = this.state;\r\n\r\n    if (!replies || !thread) return null;\r\n\r\n    //tool bar to thank and reply to posts\r\n    const RepToolBar = props => {\r\n      if (props.reply)\r\n        return (\r\n          <div className=\"rep_quickrep_tool\">\r\n            <div className=\"no_thank\">{props.reply.numberOfThank || \"0\"} people thank this</div>\r\n            <button onClick={this.openModal}>Reply</button>\r\n            <button onClick={() => this.thank(props.reply.id)}>Thanks</button>\r\n          </div>\r\n        );\r\n      else return;\r\n    };\r\n\r\n    //navbar that display the path to the thread\r\n    const NavBar = (\r\n      <div className=\"navigator\">\r\n        <Link to={\"/\"}>YAMEX</Link>\r\n        -&gt;\r\n        <Link to={`/${match.params.forumName}`}>{match.params.forumName}</Link>\r\n        -&gt;\r\n        <Link to={`/${match.params.forumName}/${match.params.subforumName}`}>\r\n          {match.params.subforumName}\r\n        </Link>\r\n        -&gt;\r\n        <Link\r\n          to={`/${match.params.forumName}/${match.params.subforumName}/${match.params.threadId}`}\r\n        >\r\n          {thread.name}\r\n        </Link>\r\n      </div>\r\n    );\r\n\r\n    const ThreadHeader = (\r\n      <div className=\"thread_header\">\r\n        <div className=\"user_avatar\">\r\n          <CloudinaryContext cloudName={cloudinaryConfig.cloud_name}>\r\n            <Image publicId={thread.author.avatarUrl} />\r\n          </CloudinaryContext>\r\n        </div>\r\n        <div className=\"thread_header_info\">\r\n          <div className=\"thread_name\">{thread.name}</div>\r\n          <div className=\"thread_creator\">\r\n            By <Link to={`/user/${thread.author.id}`}>{thread.author.username}</Link>, Member on{\" \"}\r\n            {formatTime(new Date(thread.author.createdTime))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n\r\n    const repliesListView = replies.sort((reply1, reply2) => {\r\n      const d1 = new Date(reply1.createdTime);\r\n      const d2 = new Date(reply2.createdTime);\r\n      return d1.getTime() - d2.getTime();\r\n    }).map((reply, index) => {\r\n      function createMarkup() {\r\n        return { __html: DOMPurify.sanitize(reply.content) };\r\n      }\r\n      return (\r\n        <div key={reply.id}>\r\n          <div className=\"post_reply\">\r\n            <div className=\"user_post_rep\">\r\n              <div className=\"post_user\">\r\n                <Link to={`/user/${reply.author.id}`}>{reply.author.username}</Link>\r\n              </div>\r\n              <div className=\"post_info\">{formatTime(new Date(reply.createdTime))}</div>\r\n            </div>\r\n            <div className=\"post_content\">\r\n              <div className=\"post_user_content\">\r\n                <CloudinaryContext cloudName={cloudinaryConfig.cloud_name}>\r\n                  <Image publicId={reply.author.avatarUrl} alt=\"user-avatar\" />\r\n                </CloudinaryContext>\r\n\r\n                <div className=\"user_title\">Role: {reply.author.role}</div>\r\n              </div>\r\n              <div className=\"post_rep_content\">\r\n                <div dangerouslySetInnerHTML={createMarkup()} />\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <RepToolBar reply={reply} />\r\n        </div>\r\n      );\r\n      // }\r\n    });\r\n\r\n    let errorDisplay = (\r\n      <div style={{ backgroundColor: \"red\", fontSize: 20, textAlign: \"center\" }}>\r\n        {errorMessage}\r\n      </div>\r\n    );\r\n\r\n    const customStyles = {\r\n      content: {\r\n        top: \"50%\",\r\n        left: \"50%\",\r\n        right: \"auto\",\r\n        bottom: \"auto\",\r\n        marginRight: \"-50%\",\r\n        transform: \"translate(-50%, -50%)\",\r\n        overflow: \"scroll\",\r\n        height: \"500px\"\r\n      }\r\n    };\r\n\r\n    let newReplyModal = (\r\n      <Modal style={customStyles} isOpen={isModalOpen} contentLabel=\"newThreadModal\">\r\n        <div style={{ flex: 1, flexDirection: \"column\" }}>\r\n          <h2>Enter information</h2>\r\n          <EditorConvertToHTML submit={this.submit} />\r\n\r\n          <button onClick={this.closeModal}>Close</button>\r\n        </div>\r\n      </Modal>\r\n    );\r\n\r\n    if (isLoading) return <div />;\r\n    else\r\n      return (\r\n        <div>\r\n          {newReplyModal}\r\n          {NavBar}\r\n          {ThreadHeader}\r\n          {errorDisplay}\r\n          <div className=\"paginate_bar\">\r\n            {authData.sessionToken ? (\r\n              <button className=\"postnew\" onClick={this.openModal}>\r\n                Post Reply\r\n              </button>\r\n            ) : null}\r\n            {pages\r\n              ? <div>\r\n                <Pagination current={current} loadOnClick={this.loadRepliesFromPageNum} pages={pages} />\r\n              </div> : null\r\n            }\r\n\r\n          </div>\r\n\r\n          {repliesListView}\r\n        </div>\r\n      );\r\n  }\r\n}\r\nThread.propTypes = {\r\n  match: PropTypes.object,\r\n  authData: PropTypes.object\r\n};\r\nexport default Thread;\r\n","import Forum from \"./Forum\";\r\nexport default Forum;\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Link, Route, Switch } from \"react-router-dom\";\r\nimport Modal from \"react-modal\";\r\n\r\nimport { MiniThreadView } from './MiniThreadView';\r\nimport SubForum from \"../SubForum\";\r\nimport \"./Forum.css\";\r\nimport {\r\n\tgetSubForumList,\r\n\tgetNewestThreadList,\r\n\tcreateSubforum\r\n} from \"../API_Functions\";\r\nimport { Thread } from \"../Thread\";\r\n\r\n\r\n//full forum view\r\nclass Forum extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tsubforumList: [],\r\n\t\t\tisModalOpen: false,\r\n\t\t\tnewSubforumName: \"\",\r\n\t\t\tnewSubforumDiscription: \"\"\r\n\t\t};\r\n\t\tthis.createNewSubforum = this.createNewSubforum.bind(this);\r\n\t\tthis.openModal = this.openModal.bind(this);\r\n\t\tthis.closeModal = this.closeModal.bind(this);\r\n\t\tthis.handleInputChange = this.handleInputChange.bind(this);\r\n\t}\r\n\r\n\tasync createNewSubforum() {\r\n\t\ttry {\r\n\t\t\tconst { forumData } = this.props;\r\n\t\t\tconst { newSubforumName, newSubforumDiscription } = this.state;\r\n\t\t\tawait createSubforum(\r\n\t\t\t\tforumData.id,\r\n\t\t\t\tnewSubforumDiscription,\r\n\t\t\t\tnewSubforumName\r\n\t\t\t);\r\n\t\t\twindow.location.reload();\r\n\t\t} catch (error) {\r\n\t\t\talert(error);\r\n\t\t} finally {\r\n\t\t\tthis.closeModal();\r\n\t\t}\r\n\t}\r\n\r\n\thandleInputChange(event) {\r\n\t\t//this function runs when user input new subforum name and discription\r\n\t\tconst name = event.target.name;\r\n\t\tconst value = event.target.value;\r\n\t\tthis.setState({\r\n\t\t\t[name]: value\r\n\t\t});\r\n\t}\r\n\r\n\topenModal() {\r\n\t\tthis.setState({ isModalOpen: true });\r\n\t}\r\n\r\n\tcloseModal() {\r\n\t\tthis.setState({\r\n\t\t\tisModalOpen: false,\r\n\t\t\tnewSubforumName: \"\",\r\n\t\t\tnewSubforumDiscription: \"\"\r\n\t\t});\r\n\t}\r\n\tcomponentDidMount() {\r\n\t\tconst { forumData } = this.props;\r\n\t\tgetSubForumList(forumData.id)\r\n\t\t\t.then(\r\n\t\t\t\tsubforumList => {\r\n\t\t\t\t\treturn subforumList;\r\n\t\t\t\t},\r\n\t\t\t\terror => alert(error)\r\n\t\t\t)\r\n\t\t\t.then(subforumList => {\r\n\t\t\t\t//create a copy of the subforumlist\r\n\t\t\t\tlet subforumListCopy = subforumList.slice();\r\n\t\t\t\t//for each subforum, get its list of threads, use Promise.all to wait for\r\n\t\t\t\t//all Promises return by async functions inside the map function\r\n\r\n\t\t\t\tPromise.all(\r\n\t\t\t\t\tsubforumListCopy.map(async subforum => {\r\n\t\t\t\t\t\tlet threadList = await getNewestThreadList(subforum.id);\r\n\t\t\t\t\t\t//create a new object which includes the subforum data plus\r\n\t\t\t\t\t\t//threadList data for easy data display\r\n\t\t\t\t\t\treturn Object.assign(\r\n\t\t\t\t\t\t\t{},\r\n\t\t\t\t\t\t\t{ ...subforum },\r\n\t\t\t\t\t\t\t{ threadList: threadList }\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t})\r\n\t\t\t\t).then(subforumListWithThreads => {\r\n\t\t\t\t\tthis.setState({ subforumList: subforumListWithThreads });\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t}\r\n\trender() {\r\n\t\tconst { match, forumData, authData, userFromServer } = this.props;\r\n\t\tconst { isModalOpen, newSubforumName, newSubforumDiscription } = this.state;\r\n\r\n\t\tconst customStyles = {\r\n\t\t\tcontent: {\r\n\t\t\t\ttop: \"50%\",\r\n\t\t\t\tleft: \"50%\",\r\n\t\t\t\tright: \"auto\",\r\n\t\t\t\tbottom: \"auto\",\r\n\t\t\t\tmarginRight: \"-50%\",\r\n\t\t\t\ttransform: \"translate(-50%, -50%)\"\r\n\t\t\t}\r\n\t\t};\r\n\t\tconst newThreadModal = (\r\n\t\t\t<Modal\r\n\t\t\t\tstyle={customStyles}\r\n\t\t\t\tisOpen={isModalOpen}\r\n\t\t\t\tcontentLabel=\"newThreadModal\"\r\n\t\t\t>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<h2>Enter information</h2>\r\n\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tstyle={{ border: \"1px black solid\", color: \"black\" }}\r\n\t\t\t\t\t\tname=\"newSubforumName\"\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tplaceholder=\"Subforum Name\"\r\n\t\t\t\t\t\tvalue={newSubforumName}\r\n\t\t\t\t\t\tonChange={this.handleInputChange}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tstyle={{ border: \"1px black solid\", color: \"black\", margin: \"1em\" }}\r\n\t\t\t\t\t\tname=\"newSubforumDiscription\"\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tplaceholder=\"Subforum Discription\"\r\n\t\t\t\t\t\tvalue={newSubforumDiscription}\r\n\t\t\t\t\t\tonChange={this.handleInputChange}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<button onClick={this.createNewSubforum}>Submit</button>\r\n\t\t\t\t\t<button onClick={this.closeModal}>Close</button>\r\n\t\t\t\t</div>\r\n\t\t\t</Modal>\r\n\t\t);\r\n\r\n\t\tconst subforums = this.state.subforumList;\r\n\t\t// if (!subforums || !subforums.threadList) return null;\r\n\t\t//create a list of subforum in the forum, each subforum has a list of threads\r\n\t\tlet SubforumList = subforums.map(subforum => {\r\n\t\t\t//if there is no threads, return nothing\r\n\t\t\tif (!subforum.threadList) return null;\r\n\t\t\tlet MiniThreadViews = subforum.threadList.map(thread => (\r\n\t\t\t\t<MiniThreadView\r\n\t\t\t\t\tforumPath={forumData.path}\r\n\t\t\t\t\tsubforumPath={subforum.path}\r\n\t\t\t\t\tkey={thread.id}\r\n\t\t\t\t\tthreadData={thread}\r\n\t\t\t\t\tsubforum={subforum}\r\n\t\t\t\t/>\r\n\t\t\t));\r\n\t\t\treturn (\r\n\t\t\t\t<div key={subforum.id}>\r\n\t\t\t\t\t<div className=\"minithread minithread-header\">\r\n\t\t\t\t\t\t<div className=\"mini-date-and-tname\">{subforum.name} </div>\r\n\t\t\t\t\t\t<div className=\"rep\">REPLIES</div>\r\n\t\t\t\t\t\t<div className=\"views\">VIEW</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{MiniThreadViews}\r\n\t\t\t\t\t<div className=\"more\">\r\n\t\t\t\t\t\t<Link to={`/${forumData.path}/${subforum.path}`}>\r\n\t\t\t\t\t\t\tGo to {subforum.name} subforum\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<hr />\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t});\r\n\r\n\t\tlet listOfSubForumRoutes = subforums.map(subforum => (\r\n\t\t\t<Route\r\n\t\t\t\tkey={subforum.id}\r\n\t\t\t\tpath={`${match.path}/${subforum.path}`}\r\n\t\t\t\trender={props => (\r\n\t\t\t\t\t<SubForum\r\n\t\t\t\t\t\t{...props}\r\n\t\t\t\t\t\tforumData={forumData}\r\n\t\t\t\t\t\tsubforumData={subforum}\r\n\t\t\t\t\t\tauthData={authData}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\t\t\t/>\r\n\t\t));\r\n\r\n\t\tlet ForumView = (\r\n\t\t\t<div>\r\n\t\t\t\t<div className=\"navigator\">\r\n\t\t\t\t\t<Link to={\"/\"}>YAMEX</Link>\r\n\t\t\t\t\t-&gt;\r\n\t\t\t\t\t<Link to={`/${forumData.path}`}>{forumData.name}</Link>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{newThreadModal}\r\n\t\t\t\t<div className=\"forum_view\">\r\n\t\t\t\t\t{userFromServer && userFromServer.role === \"ADMIN\" ? (\r\n\t\t\t\t\t\t<button onClick={this.openModal}>Create new subforum</button>\r\n\t\t\t\t\t) : null}\r\n\t\t\t\t\t<h1>{forumData.name}</h1>\r\n\t\t\t\t\t{SubforumList}{\" \"}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"tab\">\r\n\t\t\t\t<Route exact path={`${match.path}`} render={() => ForumView} />\r\n\t\t\t\t<Switch>\r\n\t\t\t\t\t<Route\r\n\t\t\t\t\t\texact\r\n\t\t\t\t\t\tpath={\"/:forumName/:subforumName/thread/:threadId\"}\r\n\t\t\t\t\t\trender={props => <Thread authData={authData} {...props} />}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t{listOfSubForumRoutes}\r\n\t\t\t\t</Switch>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\nForum.propTypes = {\r\n\tmatch: PropTypes.shape({\r\n\t\turl: PropTypes.string,\r\n\t\tpath: PropTypes.string,\r\n\t\tisExact: PropTypes.bool,\r\n\t\tparams: PropTypes.object\r\n\t}),\r\n\tforumData: PropTypes.shape({\r\n\t\tbikeInfo: PropTypes.string,\r\n\t\tcoverUrl: PropTypes.string,\r\n\t\tcreatedTime: PropTypes.string,\r\n\t\tdescription: PropTypes.string,\r\n\t\tid: PropTypes.string,\r\n\t\tlastModifiedTime: PropTypes.string,\r\n\t\tmoderators: PropTypes.arrayOf(PropTypes.string),\r\n\t\tname: PropTypes.string,\r\n\t\tpath: PropTypes.string\r\n\t}),\r\n\tauthData: PropTypes.object,\r\n\tuserFromServer: PropTypes.object\r\n};\r\nexport default Forum;\r\n","import LoadingIcon from \"./LoadingIcon\";\r\n\r\nexport default LoadingIcon;\r\n","import React from \"react\";\r\nimport ReactLoading from \"react-loading\";\r\n\r\nconst LoadingIcon = () => (\r\n\t<div\r\n\t\tstyle={{\r\n\t\t\tdisplay: \"flex\",\r\n\t\t\tflexDirection: \"column\",\r\n\t\t\talignItems: \"center\",\r\n\t\t\tjustifyContent: \"center\",\r\n\t\t}}\r\n\t>\r\n\t\t<ReactLoading type=\"balls\" color=\"var(--main-orange)\" height={50} width={50} />\r\n\t\t<div style={{ fontWeight: \"bold\", fontSize: 24, color: \"var(--main-orange)\" }}>Please wait...</div>\r\n\t</div>\r\n);\r\nexport default LoadingIcon;\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport Collapsible from \"react-collapsible\";\r\nimport { Link, Route, Switch } from \"react-router-dom\";\r\nimport Forum from \"../Forum\";\r\nimport LoadingIcon from \"../LoadingIcon\";\r\nimport { getSubForumList, getForumList, createForum } from \"../API_Functions\";\r\nimport Modal from \"react-modal\";\r\nimport { formatTime } from \"../../services/time\";\r\n// subforumData\r\n// \"id\": \"5a2405a1799a83547a3cb970\",\r\n// \"createdTime\": \"2017-12-03T14:09:37.308Z\",\r\n// \"lastModifiedTime\": \"2017-12-03T14:09:37.308Z\",\r\n// \"name\": \"FAQ\",\r\n// \"description\": \"Question\",\r\n// \"forumId\": \"5a1ecb2b799a833ca2c7657a\",\r\n// \"latestThread\": null,\r\n// \"threadNumber\": 0,\r\n// \"replyNumber\": 0\r\nconst MiniSubForumView = props => {\r\n\tlet { subforumData, forumPath } = props;\r\n\treturn (\r\n\t\t<div className=\"subforum\">\r\n\t\t\t<div className=\"subforum_info\">\r\n\t\t\t\t<Link to={`${forumPath}/${subforumData.path}`}>\r\n\t\t\t\t\t{subforumData.name}\r\n\t\t\t\t</Link>\r\n\t\t\t\t<p>{subforumData.description}</p>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"no_thread_post\">\r\n\t\t\t\t<span>Threads: NaN</span> {subforumData.threadNumber}\r\n\t\t\t\t<br />\r\n\t\t\t\t<span>Posts: NaN</span> {subforumData.replyNumber}\r\n\t\t\t</div>\r\n\t\t\t{subforumData.latestThread === null ? (\r\n\t\t\t\t<div className=\"first_unread_post\">\r\n\t\t\t\t\t{\"null\"}\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\tby <div>{\"null\"}</div>\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t{\"null\"}\r\n\t\t\t\t</div>\r\n\t\t\t) : (\r\n\t\t\t\t\t<div className=\"first_unread_post\">\r\n\t\t\t\t\t\tLatest thread:  <Link to={`${forumPath}/${subforumData.path}/thread/${subforumData.latestThread.id}`}>\r\n\t\t\t\t\t\t\t{subforumData.latestThread.name}\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\ton {formatTime(new Date(subforumData.latestThread.createdTime))}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nMiniSubForumView.propTypes = {\r\n\tsubforumData: PropTypes.object,\r\n\tmatch: PropTypes.object,\r\n\tforumPath: PropTypes.string\r\n};\r\n\r\nclass MiniForumView extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tsubforumList: []\r\n\t\t};\r\n\t}\r\n\tcomponentDidMount() {\r\n\t\tlet { forum } = this.props;\r\n\t\tgetSubForumList(forum.id).then(\r\n\t\t\tsubforumList => {\r\n\t\t\t\tthis.setState({ subforumList: subforumList });\r\n\t\t\t},\r\n\t\t\terror => console.log(error)\r\n\t\t);\r\n\t}\r\n\trender() {\r\n\t\tlet { forum, match } = this.props;\r\n\t\tlet { subforumList } = this.state;\r\n\t\t//create a list of mini (small) subforums of each forum\r\n\t\tlet MiniSubForumViewList = subforumList.map(subforum => (\r\n\t\t\t<MiniSubForumView\r\n\t\t\t\tforumPath={forum.path}\r\n\t\t\t\tsubforumData={subforum}\r\n\t\t\t\t{...this.props}\r\n\t\t\t\tkey={subforum.id}\r\n\t\t\t/>\r\n\t\t));\r\n\r\n\t\treturn (\r\n\t\t\t<Collapsible\r\n\t\t\t\ttrigger={\r\n\t\t\t\t\t<div className=\"trigger\" id=\"forum1-trigger\">\r\n\t\t\t\t\t\t<Link to={`${match.url}${forum.path}`}>{forum.name}</Link>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t\topen\r\n\t\t\t\tkey={forum.id}\r\n\t\t\t>\r\n\t\t\t\t<div id=\"wrapper\" className=\"open\">\r\n\t\t\t\t\t<div className=\"forum-content\" id=\"forum1-content\">\r\n\t\t\t\t\t\t{MiniSubForumViewList}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</Collapsible>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nMiniForumView.propTypes = {\r\n\tforum: PropTypes.object,\r\n\tmatch: PropTypes.object\r\n};\r\n\r\n//MainContent will display the list of all forums on the site with their subforums\r\nclass MainContent extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tisError: null,\r\n\t\t\tforumList: [],\r\n\t\t\tisLoading: true,\r\n\t\t\tisModalOpen: false,\r\n\t\t\tnewForumName: \"\",\r\n\t\t\tcoverUrl: \"\",\r\n\t\t\t//bike info\r\n\t\t\tbrand: \"\",\r\n\t\t\tdescription: \"\",\r\n\t\t\tname: \"\",\r\n\t\t\tpower: 0,\r\n\t\t\tstillProducing: true\r\n\t\t};\r\n\t\tthis.openModal = this.openModal.bind(this);\r\n\t\tthis.closeModal = this.closeModal.bind(this);\r\n\t\tthis.createNewForum = this.createNewForum.bind(this);\r\n\t\tthis.handleInputChange = this.handleInputChange.bind(this);\r\n\t}\r\n\r\n\tasync createNewForum() {\r\n\t\ttry {\r\n\t\t\tconst {\r\n\t\t\t\tbrand,\r\n\t\t\t\tdescription,\r\n\t\t\t\tname,\r\n\t\t\t\tnewForumName,\r\n\t\t\t\tpower,\r\n\t\t\t\tstillProducing,\r\n\t\t\t\tcoverUrl\r\n\t\t\t} = this.state;\r\n\r\n\t\t\tconst bikeInfo = {\r\n\t\t\t\tbrand: brand,\r\n\t\t\t\tdescription: description,\r\n\t\t\t\tname: name,\r\n\t\t\t\tpower: power,\r\n\t\t\t\tstillProducing: stillProducing\r\n\t\t\t};\r\n\r\n\t\t\tawait createForum(newForumName, coverUrl, bikeInfo);\r\n\t\t\twindow.location.reload();\r\n\t\t} catch (error) {\r\n\t\t\tthis.setState({ isError: true });\r\n\t\t\tconsole.log(error);\r\n\t\t} finally {\r\n\t\t\tthis.setState({ isModalOpen: false });\r\n\t\t}\r\n\t}\r\n\r\n\thandleInputChange(event) {\r\n\t\t//this function runs when user type in input box\r\n\t\tconst name = event.target.name;\r\n\t\tlet value = event.target.value;\r\n\t\tif (name === \"stillProducing\") value = value === \"true\" ? true : false;\r\n\r\n\t\tthis.setState({\r\n\t\t\t[name]: value\r\n\t\t});\r\n\t}\r\n\r\n\topenModal() {\r\n\t\tthis.setState({ isModalOpen: true });\r\n\t}\r\n\r\n\tcloseModal() {\r\n\t\tthis.setState({\r\n\t\t\tisModalOpen: false,\r\n\t\t\tnewForumName: \"\",\r\n\t\t\tnewForumdescription: \"\"\r\n\t\t});\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tgetForumList().then(\r\n\t\t\tforumList => {\r\n\t\t\t\tthis.setState({ isLoading: false, forumList: forumList });\r\n\t\t\t},\r\n\t\t\terror => {\r\n\t\t\t\tthis.setState({ isLoading: false, isError: true });\r\n\t\t\t\tconsole.log(\"Error while getting forum list: \", error);\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n\trender() {\r\n\t\tconst {\r\n\t\t\tforumList,\r\n\t\t\tisError,\r\n\t\t\tisLoading,\r\n\t\t\tcoverUrl,\r\n\t\t\tisModalOpen,\r\n\t\t\tbrand,\r\n\t\t\tdescription,\r\n\t\t\tname,\r\n\t\t\tnewForumName,\r\n\t\t\tpower,\r\n\t\t\tstillProducing\r\n\t\t} = this.state;\r\n\t\tconst { match, userFromServer } = this.props;\r\n\r\n\t\t//if the component is loading display LoadingIcon component\r\n\t\tif (isLoading)\r\n\t\t\treturn (\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<LoadingIcon />\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t//if there is an error display this error message\r\n\t\tif (isError) {\r\n\t\t\treturn (\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<div>There has been an error, please refresh the page</div>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\t\tconst customStyles = {\r\n\t\t\tcontent: {\r\n\t\t\t\ttop: \"50%\",\r\n\t\t\t\tleft: \"50%\",\r\n\t\t\t\tright: \"auto\",\r\n\t\t\t\tbottom: \"auto\",\r\n\t\t\t\tmarginRight: \"-50%\",\r\n\t\t\t\ttransform: \"translate(-50%, -50%)\"\r\n\t\t\t}\r\n\t\t};\r\n\t\tconst newForumModal = (\r\n\t\t\t<Modal\r\n\t\t\t\tstyle={customStyles}\r\n\t\t\t\tisOpen={isModalOpen}\r\n\t\t\t\tcontentLabel=\"newThreadModal\"\r\n\t\t\t>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<h2>Enter information</h2>\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t<label>\r\n\t\t\t\t\t\tForum Name\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\tmarginLeft: \"5em\",\r\n\t\t\t\t\t\t\t\tborder: \"1px black solid\",\r\n\t\t\t\t\t\t\t\tcolor: \"black\"\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tname=\"newForumName\"\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tplaceholder=\"Forum Name\"\r\n\t\t\t\t\t\t\tvalue={newForumName}\r\n\t\t\t\t\t\t\tonChange={this.handleInputChange}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t<label>\r\n\t\t\t\t\t\tURL for cover picture\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tstyle={{ border: \"1px black solid\", color: \"black\", marginLeft: \"1em\" }}\r\n\t\t\t\t\t\t\tname=\"coverUrl\"\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tplaceholder=\"URL for cover picture\"\r\n\t\t\t\t\t\t\tvalue={coverUrl}\r\n\t\t\t\t\t\t\tonChange={this.handleInputChange}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t<h3>Enter bike info</h3>\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t<label>\r\n\t\t\t\t\t\tBike brand\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tstyle={{ border: \"1px black solid\", color: \"black\", marginLeft: \"6em\" }}\r\n\t\t\t\t\t\t\tname=\"brand\"\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tplaceholder=\"Brand\"\r\n\t\t\t\t\t\t\tvalue={brand}\r\n\t\t\t\t\t\t\tonChange={this.handleInputChange}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t<label>\r\n\t\t\t\t\t\tBike name\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tstyle={{ border: \"1px black solid\", color: \"black\", marginLeft: \"6em\" }}\r\n\t\t\t\t\t\t\tname=\"name\"\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tplaceholder=\"Name\"\r\n\t\t\t\t\t\t\tvalue={name}\r\n\t\t\t\t\t\t\tonChange={this.handleInputChange}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t<label>\r\n\t\t\t\t\t\tBike description\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tstyle={{ border: \"1px black solid\", color: \"black\", marginLeft: \"3em\" }}\r\n\t\t\t\t\t\t\tname=\"description\"\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tplaceholder=\"description\"\r\n\t\t\t\t\t\t\tvalue={description}\r\n\t\t\t\t\t\t\tonChange={this.handleInputChange}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t<label>\r\n\t\t\t\t\t\tBike power\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tstyle={{ border: \"1px black solid\", color: \"black\", marginLeft: \"6em\" }}\r\n\t\t\t\t\t\t\tname=\"power\"\r\n\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\tplaceholder=\"Power\"\r\n\t\t\t\t\t\t\tvalue={power}\r\n\t\t\t\t\t\t\tonChange={this.handleInputChange}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t<h4>Is this bike still in production?</h4>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tname=\"stillProducing\"\r\n\t\t\t\t\t\ttype=\"radio\"\r\n\t\t\t\t\t\tvalue={true}\r\n\t\t\t\t\t\tonChange={this.handleInputChange}\r\n\t\t\t\t\t\tchecked={stillProducing == true}\r\n\t\t\t\t\t\tstyle={{ margin: \"0.5em\" }}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\tYes\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tname=\"stillProducing\"\r\n\t\t\t\t\t\ttype=\"radio\"\r\n\t\t\t\t\t\tvalue={false}\r\n\t\t\t\t\t\tonChange={this.handleInputChange}\r\n\t\t\t\t\t\tchecked={stillProducing == false}\r\n\t\t\t\t\t\tstyle={{ margin: \"0.5em\" }}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\tNo\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t<button onClick={this.createNewForum}>Submit</button>\r\n\t\t\t\t\t<button onClick={this.closeModal}>Close</button>\r\n\t\t\t\t</div>\r\n\t\t\t</Modal>\r\n\t\t);\r\n\t\tlet listOfForum = null;\r\n\t\tlet listOfForumRoute = null;\r\n\t\t//create a list of mini (small) peak of the forums in the site\r\n\t\tlistOfForum = forumList.map(forum => (\r\n\t\t\t<MiniForumView forum={forum} match={match} key={forum.id} />\r\n\t\t));\r\n\t\t//create a list of routes to go to each forum\r\n\t\tlistOfForumRoute = forumList.map(forum => (\r\n\t\t\t<Route\r\n\t\t\t\tpath={`${match.path}${forum.path}`}\r\n\t\t\t\tkey={forum.id}\r\n\t\t\t\trender={props => (\r\n\t\t\t\t\t<Forum\r\n\t\t\t\t\t\t{...props}\r\n\t\t\t\t\t\tuserFromServer={userFromServer}\r\n\t\t\t\t\t\tforumData={forum}\r\n\t\t\t\t\t\tauthData={this.props.authData}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\t\t\t/>\r\n\t\t));\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t{newForumModal}\r\n\t\t\t\t{userFromServer && userFromServer.role === \"ADMIN\" ? (\r\n\t\t\t\t\t<button onClick={this.openModal} style={{ width: \"80%\", margin: \"1em\" }}>Create new Forum</button>\r\n\t\t\t\t) : null}\r\n\t\t\t\t<Switch>\r\n\t\t\t\t\t<Route exact path=\"/\" render={() => listOfForum} />\r\n\t\t\t\t\t{listOfForumRoute}\r\n\t\t\t\t</Switch>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nMainContent.propTypes = {\r\n\tmatch: PropTypes.shape({\r\n\t\turl: PropTypes.string,\r\n\t\tpath: PropTypes.string,\r\n\t\tisExact: PropTypes.bool,\r\n\t\tparams: PropTypes.object\r\n\t}),\r\n\tforumList: PropTypes.array,\r\n\tlistOfForumRoute: PropTypes.array,\r\n\tauthData: PropTypes.object,\r\n\tuserFromServer: PropTypes.object\r\n};\r\n\r\n// bikeInfo: null\r\n// coverUrl: null\r\n// createdTime: \"2017-11-30T02:32:20.192Z\"\r\n// description: null\r\n// id: \"5a1f6db45a111d1a78bbc2aa\"\r\n// lastModifiedTime: \"2017-11-30T02:32:20.192Z\"\r\n// moderators: null\r\n// name: \"Honda Future\"\r\n// path: \"honda-future\"\r\nexport default MainContent;\r\n","import MainContent from \"./MainContent\";\r\nexport default MainContent;\r\n","import { UserInfo } from \"./UserInfo\";\r\n\r\nexport default UserInfo;\r\n","import React, { Component, useContext } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Image, Transformation, CloudinaryContext } from 'cloudinary-react';\r\n\r\nimport { getUserInfo } from \"../API_Functions\";\r\nimport { updateUserInfo } from \"../API_Functions\";\r\nimport { formatTime } from '../../services/time';\r\nimport cloudinaryConfig from '../../Constants/Cloudinary';\r\nimport \"./user.css\";\r\n\r\nclass UserInfoComponent extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tuserInfo: null,\r\n\t\t\tavatarUrl: \"\",\r\n\t\t\tavatarUpload: null,\r\n\t\t\tfavoriteBike: \"\",\r\n\t\t\tusername: \"\",\r\n\t\t\terrorMessage: \"\",\r\n\t\t\tisUpdateSuccess: false,\r\n\t\t\tisUpdating: false\r\n\t\t};\r\n\t\tthis.handleChangeValue = this.handleChangeValue.bind(this);\r\n\t\tthis.updateUser = this.updateUser.bind(this);\r\n\t\t// this.fileInput = React.createRef();\r\n\t}\r\n\r\n\thandleChangeValue(event) {\r\n\t\tlet targetName = event.target.name;\r\n\t\tif (targetName == \"avatarUpload\") {\r\n\t\t\tthis.setState({ [targetName]: event.target.files[0] });\r\n\t\t}\r\n\t\telse this.setState({ [targetName]: event.target.value });\r\n\t}\r\n\r\n\tasync updateUser(event) {\r\n\t\tevent.preventDefault();\r\n\t\tlet { authData } = this.props;\r\n\t\tlet { avatarUrl, favoriteBike, username, avatarUpload } = this.state;\r\n\r\n\t\tlet data = new FormData();\r\n\t\tdata.append(\"avatarFile\", avatarUpload);\r\n\t\tdata.append(\"avatarUrl\", avatarUrl);\r\n\t\tdata.append(\"favoriteBike\", favoriteBike);\r\n\r\n\t\ttry {\r\n\t\t\tthis.setState({ isUpdating: true });\r\n\t\t\tlet response = await updateUserInfo(authData, data);\r\n\t\t\tthis.setState({\r\n\t\t\t\tisUpdateSuccess: true\r\n\t\t\t});\r\n\r\n\t\t\tthis.setState({\r\n\t\t\t\tavatarUrl: response.avatarUrl,\r\n\t\t\t\tfavoriteBike: response.favoriteBike\r\n\t\t\t});\r\n\r\n\t\t\tlet okay = alert(\"Update successful\");\r\n\t\t\twindow.location.reload();\r\n\r\n\t\t} catch (error) {\r\n\t\t\tthis.setState({ errorMessage: error.message });\r\n\t\t} finally {\r\n\t\t\tthis.setState({ isUpdating: false });\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tconst { match, sessionToken } = this.props;\r\n\t\tgetUserInfo(match.params.userId, sessionToken).then(\r\n\t\t\tuser => {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tuserInfo: user,\r\n\t\t\t\t\tavatarUrl: user.avatarUrl,\r\n\t\t\t\t\tfavoriteBike: user.favoriteBike,\r\n\t\t\t\t\tusername: user.username\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\terror => {\r\n\t\t\t\tconsole.log(error);\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {\r\n\t\t\tuserInfo,\r\n\t\t\tavatarUrl,\r\n\t\t\tfavoriteBike,\r\n\t\t\tusername,\r\n\t\t\terrorMessage,\r\n\t\t\tisUpdateSuccess,\r\n\t\t\tisUpdating\r\n\t\t} = this.state;\r\n\t\tconst { authData, match } = this.props;\r\n\r\n\t\tif (!userInfo) return null;\r\n\t\telse if (errorMessage) return (\r\n\t\t\t<div style={{ backgroundColor: \"red\", fontSize: 20, textAlign: \"center\" }}>\r\n\t\t\t\t{errorMessage}\r\n\t\t\t</div>\r\n\t\t);\r\n\t\telse {\r\n\t\t\treturn (\r\n\t\t\t\t<div className=\"container\">\r\n\t\t\t\t\t<div className=\"user\">\r\n\t\t\t\t\t\t<CloudinaryContext cloudName={cloudinaryConfig.cloud_name}>\r\n\t\t\t\t\t\t\t<Image publicId={userInfo.avatarUrl} className=\"userinfo-avatar\" />\r\n\t\t\t\t\t\t</CloudinaryContext>\r\n\t\t\t\t\t\t<div className=\"user_info\">\r\n\t\t\t\t\t\t\t<div className=\"user_name\">{userInfo.username}</div>\r\n\t\t\t\t\t\t\t<div className=\"user_title\">Role: {userInfo.role}</div>\r\n\t\t\t\t\t\t\t<div className=\"status\">Last online: {formatTime(new Date(userInfo.lastLogin))}</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"user_about\">\r\n\t\t\t\t\t\t<div className=\"fav_bike\">\r\n\t\t\t\t\t\t\t<b>Favorite bike: </b>\r\n\t\t\t\t\t\t\t{userInfo.favoriteBike}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"statistic\">\r\n\t\t\t\t\t\t\t<div className=\"no_post\">\r\n\t\t\t\t\t\t\t\t<b>No posts:</b> {userInfo.numberOfPost}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"no_tks\">\r\n\t\t\t\t\t\t\t\t<b>No thanks:</b> {userInfo.numberOfThank}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"contact\">\r\n\t\t\t\t\t\t\t<div className=\"email\">\r\n\t\t\t\t\t\t\t\t<b>Email:</b> {userInfo.email}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{authData.userId === match.params.userId ? (\r\n\t\t\t\t\t\t<div className=\"change_info\">\r\n\t\t\t\t\t\t\t<form>\r\n\r\n\t\t\t\t\t\t\t\t<h4>Change your personal infomation</h4>\r\n\t\t\t\t\t\t\t\t<label htmlFor=\"username\">Username: </label>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\tid=\"username\"\r\n\t\t\t\t\t\t\t\t\tvalue={username}\r\n\t\t\t\t\t\t\t\t\tname=\"username\"\r\n\t\t\t\t\t\t\t\t\tdisabled\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t// <label htmlFor=\"avatarUrl\">Avatar url: </label>\r\n\t\t\t\t\t\t\t\t\t// <input\r\n\t\t\t\t\t\t\t\t\t// \tid=\"avatarUrl\"\r\n\t\t\t\t\t\t\t\t\t// \tvalue={avatarUrl}\r\n\t\t\t\t\t\t\t\t\t// \tname=\"avatarUrl\"\r\n\t\t\t\t\t\t\t\t\t// \tonChange={this.handleChangeValue}\r\n\t\t\t\t\t\t\t\t\t// />\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t<label htmlFor=\"avatarUpload\">Upload Avatar: </label>\r\n\t\t\t\t\t\t\t\t<input type=\"file\" accept=\"image/png, image/jpeg, image/jpg\" name=\"avatarUpload\" onChange={this.handleChangeValue} />\r\n\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t<label htmlFor=\"favoriteBike\">Favorite Bike: </label>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\tid=\"favoriteBike\"\r\n\t\t\t\t\t\t\t\t\tvalue={favoriteBike}\r\n\t\t\t\t\t\t\t\t\tname=\"favoriteBike\"\r\n\t\t\t\t\t\t\t\t\tonChange={this.handleChangeValue}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<br />\r\n\r\n\t\t\t\t\t\t\t\t<button className=\"change_info_button\" disabled={isUpdating} onClick={this.updateUser}>\r\n\t\t\t\t\t\t\t\t\tSubmit\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t) : null}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t}\r\n}\r\nUserInfoComponent.propTypes = {\r\n\tmatch: PropTypes.object,\r\n\tauthData: PropTypes.object,\r\n\tsessionToken: PropTypes.string\r\n};\r\n\r\n// const UserInfo = React.forwardRef((props, ref) => (\r\n// \t<ContextConsumer>\r\n// \t\t{value => <UserInfoComponent {...props} {...value} ref={ref} />}\r\n// \t</ContextConsumer>\r\n// ));\r\n\r\n// const UserInfo =\r\n// \t<ContextConsumer>\r\n// \t\t{value => <UserInfoComponent {...value} />}\r\n// \t</ContextConsumer>;\r\nexport { UserInfoComponent as UserInfo };\r\n","import React, { Component } from \"react\";\r\n\r\nconst AppContext = React.createContext();\r\n\r\nclass ContextProvider extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n  render() {\r\n    return (\r\n      <AppContext.Provider value={{\r\n        ...this.props.value\r\n      }}>\r\n        {this.props.children}\r\n      </AppContext.Provider>\r\n    );\r\n  }\r\n}\r\nconst ContextConsumer = AppContext.Consumer;\r\nexport { ContextProvider, ContextConsumer };","import React, { Component } from \"react\";\r\n\r\nimport \"./footer.css\";\r\nexport const Footer = () => {\r\n  return (\r\n    <footer>\r\n      <div className=\"d-flex justify-content-around\">\r\n        <div className=\"p-2\">\r\n          <div className=\"logo\">\r\n            <img className=\"footer-logo logo\" src={require(\"../../../img/logo.png\")} alt=\"logo\" />\r\n          </div>\r\n        </div>\r\n        <div className=\"p-2 d-flex justify-content-center\">\r\n          <div className=\"describe-us\">\r\n            <span>YAMEX RUMOF - Team 1&#39;s project</span>\r\n            <br />This forum help people discuss about things and things about motorcycle.\r\n          </div>\r\n        </div>\r\n        <div className=\"p-2\">\r\n\r\n          <b>Group member :</b>\r\n          <div className=\"member\">\r\n            <br /> Nguyen Thanh Binh\r\n              <br /> Ngo Chinh Dung\r\n              <br /> Dao Thanh Duy\r\n              <br /> Vuong Thieu Huy\r\n              <br /> Diep Nhut Phuong\r\n            </div>\r\n        </div>\r\n      </div>\r\n    </footer>\r\n  );\r\n};","import React, { Component } from 'react';\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport \"./TopAuthcomp.css\";\r\nexport const TopAuthComp = ({ userId, userFromServer, logout,\r\n\thandleInputEmail, handleInputPassword, login, signup, email, password }) => {\r\n\t//if state.user exist display the logout button and link to user info page, if not display the login buttons\r\n\tconst authSection = userId ? (\r\n\t\t<div className=\"login\">\r\n\t\t\t<div className=\"login-section\">\r\n\t\t\t\t<Link to={`/user/${userId}`}>{userFromServer.username}</Link>\r\n\t\t\t\t<button className=\"button-signout\" onClick={() => logout()}>\r\n\t\t\t\t\tSignout\r\n\t\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t) : (\r\n\t\t\t<div className=\"login\">\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\tname=\"username\"\r\n\t\t\t\t\tplaceholder=\"Username\"\r\n\t\t\t\t\tvalue={email}\r\n\t\t\t\t\tonChange={handleInputEmail}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\tname=\"pwd\"\r\n\t\t\t\t\tplaceholder=\"Password\"\r\n\t\t\t\t\tvalue={password}\r\n\t\t\t\t\tonChange={handleInputPassword}\r\n\t\t\t\t/>\r\n\t\t\t\t<div className=\"login-section\">\r\n\t\t\t\t\t<button className=\"button-login\" onClick={() => login(\"email\")}>\r\n\t\t\t\t\t\tLogin\r\n\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t<button className=\"button-signup\" onClick={signup}>\r\n\t\t\t\t\t\tSignup\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t// \t<input\r\n\t\t\t\t\t\t// \tclassName=\"login-button\"\r\n\t\t\t\t\t\t// \ttype=\"image\"\r\n\t\t\t\t\t\t// \tsrc={require(\"../../../img/facebook.png\")}\r\n\t\t\t\t\t\t// \talt=\"fb logo\"\r\n\t\t\t\t\t\t// \tonClick={() => login(\"facebook\")}\r\n\t\t\t\t\t\t// \tonKeyPress={() => login(\"facebook\")}\r\n\t\t\t\t\t\t// />\r\n\t\t\t\t\t\t// <input\r\n\t\t\t\t\t\t// \tclassName=\"login-button\"\r\n\t\t\t\t\t\t// \ttype=\"image\"\r\n\t\t\t\t\t\t// \tsrc={require(\"../../../img/google-plus.png\")}\r\n\t\t\t\t\t\t// \talt=\"google logo\"\r\n\t\t\t\t\t\t// \tonClick={() => login(\"google\")}\r\n\t\t\t\t\t\t// \tonKeyPress={() => login(\"google\")}\r\n\t\t\t\t\t\t// />\r\n\t\t\t\t\t}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\treturn (\r\n\t\t<div className=\"wrap\">\r\n\t\t\t<Link to=\"/\">\r\n\t\t\t\t<img className=\"logo\" src={require(\"../../../img/logo.png\")} alt=\"Logo\" />\r\n\t\t\t</Link>\r\n\r\n\t\t\t<div className=\"search-input\">\r\n\t\t\t\t<input type=\"text\" name=\"search\" placeholder=\"Search..\" />\r\n\t\t\t</div>\r\n\t\t\t{authSection}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\n\r\n","import React, { Component } from \"react\";\r\nimport MainContent from \"./Components/MainContent\";\r\nimport { Route, Link, Switch } from \"react-router-dom\";\r\nimport Modal from \"react-modal\";\r\n\r\n// import firebase from \"./Components/Firebase/Firebase.js\";\r\nimport {\r\n\tverifyToken,\r\n\tgetUserInfo,\r\n\tloginWithEmail,\r\n\tsignupWithEmail,\r\n\tcheckSession\r\n} from \"./Components/API_Functions\";\r\nimport LoadingIcon from \"./Components/LoadingIcon\";\r\nimport UserInfo from \"./Components/User\";\r\nimport { ContextProvider } from \"./context\";\r\nimport { logout } from \"./Components/API_Functions/UserFunc\";\r\nimport { Footer } from \"./Components/Footer/footer\";\r\nimport { TopAuthComp } from './Components/TopAuthComp/TopAuthComp';\r\n\r\nimport \"../css/App.css\";\r\nimport 'bootstrap/dist/css/bootstrap.css';\r\n\r\nconst blankAppState = {\r\n\tisLoading: true,\r\n\temail: \"huy3@user.com\",\r\n\tpassword: \"password\",\r\n\terrorMessage: \"\",\r\n\t//user from firebase\r\n\tuser: null,\r\n\tuserFromServer: null,\r\n\tsessionToken: \"\",\r\n\tuserId: \"\"\r\n};\r\nModal.setAppElement(\"body\");\r\nclass App extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = blankAppState;\r\n\t\tthis.handleInputEmail = this.handleInputEmail.bind(this);\r\n\t\tthis.handleInputPassword = this.handleInputPassword.bind(this);\r\n\t\tthis.signup = this.signup.bind(this);\r\n\t\tthis.login = this.login.bind(this);\r\n\t\tthis.logout = this.logout.bind(this);\r\n\t\t// this.loginMethod = this.loginMethod.bind(this);\r\n\t}\r\n\thandleInputEmail(event) {\r\n\t\tthis.setState({ email: event.target.value });\r\n\t}\r\n\r\n\thandleInputPassword(event) {\r\n\t\tthis.setState({ password: event.target.value });\r\n\t}\r\n\r\n\t//function that will perform login function from various method and return user object\r\n\t// async loginMethod(method) {\r\n\t// \tlet provider = null;\r\n\t// \tlet result = null;\r\n\t// \tlet user = null;\r\n\t// \tlet { email, password } = this.state;\r\n\t// \ttry {\r\n\t// \t\tswitch (method) {\r\n\t// \t\t\tcase \"facebook\": //if user log in using facebook\r\n\t// \t\t\t\tconsole.log(\"Logging in with facebook\");\r\n\t// \t\t\t\tprovider = new firebase.auth.FacebookAuthProvider();\r\n\t// \t\t\t\tawait firebase.auth().signInWithRedirect(provider);\r\n\t// \t\t\t\tresult = await firebase.auth().getRedirectResult();\r\n\t// \t\t\t\t// The signed-in user info.\r\n\t// \t\t\t\tuser = result.user;\r\n\t// \t\t\t\tconsole.log(\"logged in\");\r\n\t// \t\t\t\tconsole.log(user);\r\n\t// \t\t\t\t// clientIdToken = await user.getIdToken(true);\r\n\t// \t\t\t\t// console.log(\"clientIdToken\", clientIdToken);\r\n\t// \t\t\t\t// return clientIdToken;\r\n\t// \t\t\t\treturn user;\r\n\t// \t\t\t//break;\r\n\r\n\t// \t\t\tcase \"google\": //if user log in using google\r\n\t// \t\t\t\tconsole.log(\"Logging in with google\");\r\n\t// \t\t\t\tprovider = new firebase.auth.GoogleAuthProvider();\r\n\t// \t\t\t\tawait firebase.auth().signInWithRedirect(provider);\r\n\t// \t\t\t\tfirebase.auth().languageCode = \"en\";\r\n\t// \t\t\t\tresult = await firebase.auth().getRedirectResult();\r\n\r\n\t// \t\t\t\t// The signed-in user info.\r\n\t// \t\t\t\tuser = result.user;\r\n\t// \t\t\t\tconsole.log(\"logged in\");\r\n\t// \t\t\t\t// clientIdToken = await user.getIdToken();\r\n\t// \t\t\t\treturn user;\r\n\t// \t\t\t//break;\r\n\r\n\t// \t\t\tcase \"email\": //if user log in using email/password\r\n\t// \t\t\t\tif (email === \"\" || password === \"\") return;\r\n\t// \t\t\t\tconsole.log(\"Logging in with email\");\r\n\t// \t\t\t\tawait firebase.auth().signInWithEmailAndPassword(email, password);\r\n\t// \t\t\t\tawait firebase.auth().onAuthStateChanged(function (userObj) {\r\n\t// \t\t\t\t\tif (userObj) {\r\n\t// \t\t\t\t\t\t//User is signed in\r\n\t// \t\t\t\t\t\tuser = userObj;\r\n\t// \t\t\t\t\t} else {\r\n\t// \t\t\t\t\t\tconsole.log(\"No user is logged in\");\r\n\t// \t\t\t\t\t}\r\n\t// \t\t\t\t});\r\n\t// \t\t\t\tif (user !== null) {\r\n\t// \t\t\t\t\treturn user;\r\n\t// \t\t\t\t}\r\n\r\n\t// \t\t\t\tbreak;\r\n\t// \t\t\tdefault:\r\n\t// \t\t\t\tconsole.log(\"Not recognize login method\");\r\n\t// \t\t\t\tbreak;\r\n\t// \t\t}\r\n\t// \t} catch (error) {\r\n\t// \t\tthrow error;\r\n\t// \t}\r\n\t// }\r\n\r\n\tasync login() {\r\n\t\tthis.setState({ isLoading: true, errorMessage: \"\" });\r\n\t\ttry {\r\n\t\t\tlet userObj = await loginWithEmail(this.state.email, this.state.password);\r\n\t\t\tthis.setState({\r\n\t\t\t\tuserFromServer: userObj.user,\r\n\t\t\t\tuser: userObj.user,\r\n\t\t\t\tsessionToken: userObj.token,\r\n\t\t\t\tuserId: userObj.user.id\r\n\t\t\t}, () => localStorage.setItem(\"yamexState\", JSON.stringify(this.state)));\r\n\t\t} catch (error) {\r\n\t\t\tthis.setState({ errorMessage: error.message });\r\n\t\t} finally {\r\n\t\t\tthis.setState({ isLoading: false });\r\n\t\t}\r\n\t}\r\n\r\n\tasync signup() {\r\n\t\tconst { email, password } = this.state;\r\n\t\tthis.setState({ isLoading: true, errorMessage: \"\" });\r\n\t\ttry {\r\n\t\t\tlet userObj = await signupWithEmail(email, password);\r\n\t\t\tthis.setState({\r\n\t\t\t\tuserFromServer: userObj.user,\r\n\t\t\t\tuser: userObj.user,\r\n\t\t\t\tsessionToken: userObj.token,\r\n\t\t\t\tuserId: userObj.user.id\r\n\t\t\t}, () => localStorage.setItem(\"yamexState\", JSON.stringify(this.state)));\r\n\r\n\t\t} catch (error) {\r\n\t\t\tthis.setState({ errorMessage: error.message });\r\n\t\t} finally {\r\n\t\t\tthis.setState({ isLoading: false });\r\n\t\t}\r\n\r\n\t\tthis.setState({ isLoading: false });\r\n\t}\r\n\tlogout() {\r\n\t\ttry {\r\n\t\t\tthis.setState({ isLoading: true, errorMessage: \"\" });\r\n\r\n\t\t\t//remove local state storage\r\n\t\t\tlocalStorage.setItem(\"yamexState\", null);\r\n\t\t\t//call server logout function\r\n\t\t\tlogout();\r\n\t\t\tconsole.log(\"Sign-out successful.\");\r\n\t\t\tthis.setState({ ...this.state, blankAppState }, () => {\r\n\t\t\t\twindow.location.reload();\r\n\t\t\t});\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(\"Error while logout: \", error);\r\n\t\t\tthis.setState({\r\n\t\t\t\terrorMessage: error.message\r\n\t\t\t});\r\n\t\t} finally {\r\n\t\t\tthis.setState({\r\n\t\t\t\tisLoading: false\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\tasync componentDidMount() {\r\n\r\n\t\tthis.setState({ isLoading: true });\r\n\t\tconsole.log(\"Checking if user is signed in or not\");\r\n\t\t//look through local state\r\n\t\tlet localState = JSON.parse(localStorage.getItem(\"yamexState\"));\r\n\t\tif (localState == null) {\r\n\t\t\t// no local state is found, user not signed in\r\n\t\t\tconsole.log(\"No user is logged in\");\r\n\t\t\tthis.setState({ isLoading: false });\r\n\r\n\t\t}\r\n\t\telse {\r\n\t\t\t// there are local state\r\n\t\t\tif (localState.sessionToken) {\r\n\t\t\t\tlet isSessionValid = await checkSession(localState.sessionToken);\r\n\t\t\t\tif (isSessionValid == false) {\r\n\t\t\t\t\tconsole.log(\"No user is logged in\");\r\n\t\t\t\t\tthis.setState({ isLoading: false });\r\n\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\t// session is still valid\r\n\t\t\t\t\t// let newState = Object.assign.localState, {isLoading: false} }\r\n\t\t\t\t\tthis.setState(Object.assign({}, localState, { isLoading: false }));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet {\r\n\t\t\temail,\r\n\t\t\tpassword,\r\n\t\t\terrorMessage,\r\n\t\t\tisLoading,\r\n\t\t\tsessionToken,\r\n\t\t\tuserId,\r\n\t\t\tuserFromServer\r\n\t\t} = this.state;\r\n\t\t//display a error message\r\n\t\tlet errorDisplay = (\r\n\t\t\t<div style={{ backgroundColor: \"red\", fontSize: 20, textAlign: \"center\" }}>\r\n\t\t\t\t{errorMessage}\r\n\t\t\t</div>\r\n\t\t);\r\n\r\n\t\t//display a modal in the foreground while user is login, signup or logout\r\n\t\tlet LoadingModal = (\r\n\t\t\t<Modal isOpen={isLoading} contentLabel=\"LoadingModal\">\r\n\t\t\t\t<div>\r\n\t\t\t\t\tLogging in...\r\n\t\t\t\t\t<LoadingIcon />\r\n\t\t\t\t</div>\r\n\t\t\t</Modal>\r\n\t\t);\r\n\r\n\t\treturn (\r\n\t\t\t<ContextProvider value={this.state}>\r\n\t\t\t\t<div id=\"mainApp\">\r\n\t\t\t\t\t{LoadingModal}\r\n\r\n\t\t\t\t\t<TopAuthComp userId={userId} userFromServer={userFromServer} logout={this.logout}\r\n\t\t\t\t\t\thandleInputEmail={this.handleInputEmail} handleInputPassword={this.handleInputPassword}\r\n\t\t\t\t\t\tlogin={this.login} signup={this.signup}\r\n\t\t\t\t\t\temail={email} password={password} />\r\n\r\n\t\t\t\t\t{errorDisplay}\r\n\r\n\t\t\t\t\t<Route\r\n\t\t\t\t\t\tpath=\"/\"\r\n\t\t\t\t\t\trender={props => (\r\n\t\t\t\t\t\t\t<MainContent\r\n\t\t\t\t\t\t\t\t{...props}\r\n\t\t\t\t\t\t\t\tuserFromServer={userFromServer}\r\n\t\t\t\t\t\t\t\tauthData={{ sessionToken: sessionToken, userId: userId }}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Route\r\n\t\t\t\t\t\tpath={\"/user/:userId\"}\r\n\t\t\t\t\t\trender={props => (\r\n\t\t\t\t\t\t\t<UserInfo authData={{ sessionToken: sessionToken, userId: userId }} {...props} />\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<Footer />\r\n\r\n\t\t\t\t</div>\r\n\t\t\t</ContextProvider>\r\n\r\n\r\n\t\t);\r\n\t}\r\n}\r\nexport default App;\r\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./js/App\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport registerServiceWorker from \"./registerServiceWorker\";\n\nReactDOM.render(\n\t<BrowserRouter>\n\t\t<App />\n\t</BrowserRouter>,\n\tdocument.getElementById(\"root\")\n);\nregisterServiceWorker();\n"],"sourceRoot":""}